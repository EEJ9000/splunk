# Puppet Name: <%= @title %>
#
<%
  indexers       = scope['::splunk::params::tcpout']
  cacertpath     = scope['::splunk::params::cacertpath']
  servercertpass = scope['::splunk::params::servercertpass']
  servercertpath = scope['::splunk::params::servercertpath']
-%>
[tcpout]
indexAndForward = false
defaultGroup = <%= indexers['group'] %>

[tcpout:<%= indexers['group'] %>]
autoLB = true
autoLBFrequency = 60
compressed = false
disabled = false
forceTimebasedAutoLB = true
server = <% indexers['servers'].each do |server| %><%= server %><%= "," unless server == indexers['servers'].last %><% end %>
sslCertPath = $SPLUNK_HOME/etc/auth/<%= servercertpath %>
sslPassword = <%= servercertpass %>
sslRootCAPath = $SPLUNK_HOME/etc/auth/<%= cacertpath %>
sslVerifyServerCert = false
sslCommonNameToCheck = <%= indexers['cname'] %>
useClientSSLCompression = false
