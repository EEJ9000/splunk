# Puppet Name: <%= @title %>
#
<%
ssl = scope['::splunk::params::TCPSSL']
if ssl == true
  server = scope['::splunk::params::ssl_indexers']
else
  server = scope['::splunk::params::indexers']
end
-%>
[tcpout]
indexAndForward=false
defaultGroup=allIndexers

[tcpout:allIndexers]
disabled = false
compressed = true
autoLB = true
autoLBFrequency = 60
forceTimebasedAutoLB = true
server = <% if server.is_a?(Array) -%><%= server.join(',') -%><% else -%><%= server %><%  end %>
<% if ssl == true -%>
serverCert=$SPLUNK_HOME/etc/auth/server.pem
password=password
<% end -%>

